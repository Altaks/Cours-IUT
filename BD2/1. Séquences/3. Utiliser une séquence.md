Pour récupérer les valeurs d’une séquence, on utilise les pseudo colonnes : `NEXTVAL` et `CURRVAL`.

- `NEXTVAL` stocke de manière automatique la valeur suivante de la séquence dans `CURRVAL`.
- `NEXTVAL` renverra une valeur unique à chaque référence à la séquence. Chaque valeur sera unique quel que soit l’utilisateur qui y fait référence.
- Pour récupérer la valeur suivante d’une séquence, il suffira de faire appel à la pseudo colonne `NEXTVAL` de la manière suivante : `nom_sequence.NEXTVAL`
- Pour récupérer la valeur actuelle d’une séquence, il suffira de faire appel à la pseudo colonne `CURRVAL` de la manière suivante : `nom_sequence.CURRVAL`.

>[!caution]  Attention
>Il est possible de sélectionner `NEXTVAL` et `CURRVAL` mais pas de faire une insertion, une modification ou  un effacement dans ces pseudo colonnes.

---
### Exemple d'utilisation d'une séquence 

```SQL
INSERT INTO EMP(empno, lastname, firstname) 
VALUES (seq_emp_empno.NEXTVAL, ’Albert’, ’Durand’); 

INSERT INTO tel(telno, empno) 
VALUES (’0546450030’, seq_emp_empno.CURRVAL)
```

>[!caution] Remarque
>Une séquence ne revient jamais en arrière même si des annulations (ROLLBACK) sont exécutées. Les valeurs utilisées ne seront pas remises dans le cache. De même si le système plante, les valeurs, stockées en mémoire, seront alors perdues.

---
### Exemple en tant que valeur par défaut d'une colonne 

- Il est possible de spécifier les pseudo-colonnes `CURRVAL` et `NEXTVAL` comme valeurs par défaut pour une colonne.
- Dans l’exemple suivant, on peut voir l’effet de la spécification d’une séquence comme valeur par défaut pour une colonne. La valeur par défaut est utilisée uniquement lorsque la colonne n’est pas référencée par un `INSERT`.

```SQL
CREATE SEQUENCE seq_t1_col1; 

CREATE TABLE t1 ( 
	col1 number default seq_t1_col1.nextval, 
	description varchar2 (30) 
);
```

- Les valeurs par défaut ne sont utilisées que lorsqu’une colonne n’est pas référencée dans une instruction `INSERT`.
- Si la colonne est référencée, même en fournissant la valeur `NULL`, la valeur par défaut n’est pas utilisée. Oracle 12c vous permet de modifier ce comportement en utilisant la clause `ON NULL` dans la définition par défaut.

```SQL
create sequence seq_t2_col1; 

create table t2 ( 
	col1 number default ON NULL seq_t2_col1.nextval, 
	description varchar2 (30) 
);
```

**Cours à voir :**
- [[4. Colonne d'identité]]
